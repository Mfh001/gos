/*
 * Generated by generate_tables
 * Warning: don't modify this file
 */

package register

import (
	. "gen/consts"
	. "gen/models"
	"goslib/memstore"
	"goslib/player"
)

func RegisterDataLoader() {
	memstore.RegisterDataLoader("equips", func(playerId string, ets *memstore.MemStore) {
		var datas []Equip
		ets.Db.Select(&datas, "SELECT * FROM equips where user_id=?", playerId)
		for i := 0; i < len(datas); i++ {
			data := datas[i]
			model := &EquipModel{
				Ctx:  ets.Ctx.(*player.Player),
				Data: &data,
			}
			ets.Load([]string{"models", "equips"}, data.Uuid, model)
		}
	})

	memstore.RegisterDataLoader("users", func(playerId string, ets *memstore.MemStore) {
		var datas []User
		ets.Db.Select(&datas, "SELECT * FROM users where user_id=?", playerId)
		for i := 0; i < len(datas); i++ {
			data := datas[i]
			model := &UserModel{
				Ctx:  ets.Ctx.(*player.Player),
				Data: &data,
			}
			ets.Load([]string{"models", "users"}, data.Uuid, model)
		}
	})

}
